


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="img/sanofi.svg">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.2.2">
    
    
      
        <title>Security - DRAFT AllStar速 Connect - Interoperability Manual</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.b8fb47b5.min.css">
      
        <link rel="stylesheet" href="assets/stylesheets/palette.36d1b78f.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Hammersmith+One:300,400,400i,700%7CHammersmith+One&display=fallback">
        <style>body,input{font-family:"Hammersmith One",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Hammersmith One",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="css/style.css">
    
      <link rel="stylesheet" href="css/jquery.fancybox.min.css">
    
      <link rel="stylesheet" href="css/bootstrap.min.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#concept" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<div class="logo-wrapper">
  <a href="index.html">
    <img src='img/logo.png' width="200">
  </a>
</div>
 

<!-- Application header -->

	
  <!-- Top-level navigation -->

	
<nav class="navbar sticky-top navbar-expand-md navbar-light ">



    <button class="navbar-toggler float-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown">
      <span class="navbar-toggler-icon"></span>
  </button>

    <div class="navbar-collapse collapse" id="navbarNavDropdown">
      <ul class="nav navbar-nav navbar-center">
       
 

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle-split" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            EUROPE
          </a>
          <span class="sr-only">Toggle Dropdown</span>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link" href="asia.html" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            ASIA
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="cambodia.html">Cambodia</a>
            <a class="dropdown-item" href="#">b</a>
            <a class="dropdown-item" href="#">c</a>
          </div>
        </li>
          <li class="nav-item dropdown">
            <a class="nav-link" href="north-america.html" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              NORTH AMERICA
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="canada.html">Canada</a>
              <a class="dropdown-item" href="#">Puerto Rico</a>
              <a class="dropdown-item" href="#">US</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              AFRICA
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
            <li class="nav-item">
              <a class="nav-link" href="video.html">VIDEO</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">CONTACT</a>
            </li>
      </ul>
    </div>

</nav>




    <!-- Link to home 
    <a

	  href="index.html"
      title="DRAFT AllStar速 Connect - Interoperability Manual"
      aria-label="DRAFT AllStar速 Connect - Interoperability Manual"
      class="md-header-nav__button md-logo"
    >
      
        <img src="img/sanofi_white.svg" alt="logo" />
      
    </a>
   

    <!-- Header title 
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis md-ellipsis">
        
          <span class="md-header-nav__topic">
            DRAFT AllStar速 Connect - Interoperability Manual
          </span>
          <span class="md-header-nav__topic">
            
              Security
            
          </span>
        
      </div>
    </div>

    <!-- Button to open search dialogue -->


    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
        
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h2 id="concept">Concept<a class="headerlink" href="#concept" title="Permanent link">#</a></h2>
<p>The <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> is able to pair with a single <span data-tooltip="A smart phone or tablet hosting the USER APP.">Mobile Device</span> at a time.</p>
<p>'Just Works' Bluetooth authentication is implemented to support ease of use by a user. As a
mitigation to using this authentication approach, a <span data-tooltip="A smart phone or tablet hosting the USER APP.">Mobile Device</span> that does not support
Bluetooth LE Secure Connections pairing will be prevented from pairing with the
<span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span>. Additionally, the Bluetooth transmit power is reduced during pairing
operations to reduce the attack range.</p>
<p>The <span data-tooltip="The long term security keys generated during pairing.">Bonding Credentials</span> exchanged between the <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> and the
<span data-tooltip="A smart phone or tablet hosting the USER APP.">Mobile Device</span> during pairing enable standard Bluetooth encryption to be used to protect
subsequent data sync exchanges.</p>
<p>Bluetooth LE privacy is applied to provide tracking protection when performing data sync.</p>
<p>An additional application level of data encryption is implemented to provide confidentiality of
dose data. The <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> and the <span data-tooltip="A smart phone or tablet hosting the USER APP.">Mobile Device</span> use Elliptic
Curve Diffie-Hellman (ECDH) key agreement to generate a shared secret key
(<span data-tooltip="Application layer encryption key, used for the encryption of dose data to be transmitted via Bluetooth.">Encryption Key</span>) after completing Bluetooth pairing. The <span data-tooltip="Application layer encryption key, used for the encryption of dose data to be transmitted via Bluetooth.">Encryption Key</span> is
subsequently used to encrypt <span data-tooltip="A wrapper structure around the latest record produced by the CONNECTED DEVICE, with additional data, including:
- FIRST USE TIME
- RECORD NUMBER
- Battery voltage
- Microcontroller temperature
- CHECK VALUE of the EXTENDED DOSE RECORD">Extended Dose Record</span>s and <span data-tooltip="A record of a dose event in the microcontroller non-volatile memory of the CONNECTED DEVICE containing the following:
- DOSE TIME, 
- REPORTED DOSE, 
- FAST DOSE FLAG, 
- VERY FAST DOSE FLAG, 
- BUTTON TIMEOUT FLAG, 
- LOW VOLTAGE FLAG, 
- CHECK VALUE of the DOSE RECORD">Dose Record</span>s sent
to the paired <span data-tooltip="A smart phone or tablet hosting the USER APP.">Mobile Device</span>.</p>
<p>Activation of pairing and data sync operations requires a physical trigger from a user (i.e. a
<span data-tooltip="The button on the CONNECTED DEVICE pressed to dispense drug that also activates the CONNECTED DEVICE electronics.">Dose Button</span> press). The <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> does not perform any Bluetooth
communications without being physically triggered.</p>
<p>The maximum duration of a Bluetooth session is time limited.</p>
<hr />
<h2 id="pairing">Pairing<a class="headerlink" href="#pairing" title="Permanent link">#</a></h2>
<p>The <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> supports Just Works pairing only. </p>
<p>For a detailed documentation on Just Works Pairing please refer to the Bluetooth Core Specification - Security Overview, section 5.2.4.2:</p>
<details class="tip"><summary>Bluetooth Core Specification 4.2 - Just Works</summary><p><embed src="img/Core_v4.2.pdf#page=245" type="application/pdf" width="100%" height="480px"></p>
</details>
<p>Pairing requests will be accepted from devices supporting Bluetooth LE Secure Connections pairing while the <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> is in pairing mode.  </p>
<p>Pairing requests from devices not supporting Bluetooth LE Secure Connections pairing will be rejected with the reason "Authentication Requirements".  </p>
<p>Pairing requests during data sync will be rejected with the reason "Pairing not supported". </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Pairing with Mobile Devices using Bluetooth 4.0 and 4.1 is not supported because they do not support LE Secure Connections pairing. </p>
</div>
<hr />
<h2 id="data-sync">Data sync<a class="headerlink" href="#data-sync" title="Permanent link">#</a></h2>
<p>The <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> supports LE privacy, so advertisements during data sync will be broadcast on private resolvable addresses. This prevents the address being used to track users. </p>
<p>If a <span data-tooltip="The MOBILE DEVICE for which the CONNECTED DEVICE has stored BONDING CREDENTIALS.">Bonded Device</span>  interacts with a Bluetooth characteristic requiring encryption, the data transfer will be encrypted by Bluetooth using <span data-tooltip="Advanced Encryption Standard, an encryption algorithm.">AES</span> encryption. </p>
<p>Additionally, the <span data-tooltip="The AllStar Connect drug delivery device.">Connected Device</span> supports a custom application layer encryption for protecting dose data. An Elliptic Curve Diffie-Hellman (<span data-tooltip="Elliptic Curve Diffie-Hellman, a secure method of generating a shared secret key for data encryption.">ECDH</span>) exchange is performed during pairing to generate a shared secret. A 128-bit symmetric key is then derived by performing a SHA-256 operation on the x-coordinate of the shared secret and taking the least significant 128 bits of the result. After a successful <span data-tooltip="Elliptic Curve Diffie-Hellman, a secure method of generating a shared secret key for data encryption.">ECDH</span> exchange, the derived <span data-tooltip="Application layer encryption key, used for the encryption of dose data to be transmitted via Bluetooth.">Encryption Key</span> is stored alongside the <span data-tooltip="The long term security keys generated during pairing.">Bonding Credentials</span> to be used in future data sync operations. </p>
<p>During data sync, the contents of each ExtendedDoseRecord and RecordResponse packet is encrypted using the derived key with 128-bit AES in Cipher-Block-Chaining (CBC) mode. The 128-bit initialization vector required for AES-128 CBC mode is randomly generated once per connection, after which the last block of cipher text from the previous packet is used as the initialization vector to encrypt the first block of plaintext in the next packet. </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="references.html" title="References" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                References
              </div>
            </div>
          </a>
        
        
          <a href="sequences.html" title="Sequences" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Sequences
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.de50e36d.min.js"></script>
      <script src="assets/javascripts/bundle.ff925e8b.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      


      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
      
        <script src="javascripts/jquery.fancybox.min.js"></script>
      
        <script src="javascripts/bootstrap.min.js"></script>
      
        <script src="javascripts/navbar_hover.js"></script>
      
    
  </body>
</html>